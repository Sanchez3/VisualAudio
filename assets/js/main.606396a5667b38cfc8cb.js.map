{"version":3,"sources":["webpack:///./src/assets/js/main.js"],"names":["__webpack_require__","r","__webpack_exports__","dat_gui__WEBPACK_IMPORTED_MODULE_0__","window","h5","FizzyText","drawBar","drawWave","barColor","waveColor","play","document","getElementById","pause","initGUI","that","this","gui","f1","addFolder","setChecked","prop","n","add","listen","onChange","addColor","f2","initAudioCanvas","audioCtx","AudioContext","webkitAudioContext","e","alert","audio","source","createMediaElementSource","analyser","createAnalyser","connect","destination","fftSize","bufferLength","frequencyBinCount","dataArray","Uint8Array","app","PIXI","Application","width","height","appendChild","view","w","h","graphics","Graphics","clear","stage","addChild","ticker","Ticker","stop","deltaTime","getByteTimeDomainData","sliceWidth","x","beginFill","lineStyle","i","y","moveTo","lineTo","endFill","getByteFrequencyData","barHeight","barWidth","drawRect","addEventListener","start","isPc","userAgentInfo","navigator","userAgent","Agents","Array","flag","v","length","indexOf","rootResize","wFsize","wWidth","screen","innerWidth","wHeight","innerHeight","getElementsByTagName","style","fontSize","eventInit","passive","preventDefault","cssInit","interval","timeout","end","lastInnerWidth","lastInnerHeight","noChangeCount","clearInterval","clearTimeout","setInterval","setTimeout","init","onload"],"mappings":"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","file":"assets/js/main.606396a5667b38cfc8cb.js","sourcesContent":["/**\n * Created by sanchez \n */\n'use strict';\n\n//check the environment\n// if (process.env.NODE_ENV !== 'production') {\n//     console.log('Looks like we are in development mode!');\n// }\nimport * as dat from 'dat.gui';\n// import CSS\n// import animate_css from 'animate.css/animate.min.css';\nimport css from '../css/css.css';\nimport scss from '../css/sass.scss';\n\n\n// import Js Plugins/Entities\n\n//ES6 Module\nimport 'pixi.js';\n// import Howler from 'howler';\n\n\n\nwindow.h5 = {\n    FizzyText: {\n        drawBar: false,\n        drawWave: true,\n        barColor: 0xFFFFFF,\n        waveColor: 0xFFFFFF,\n        play: function() {\n            var audio = document.getElementById('audio');\n            audio.play();\n        },\n        pause: function() {\n            var audio = document.getElementById('audio');\n            audio.pause();\n        }\n    },\n    initGUI: function() {\n        var that = this;\n        var gui = new dat.GUI();\n        var f1 = gui.addFolder('SineWave');\n\n        function setChecked(prop) {\n            var n = that.FizzyText[prop];\n            console.log(n)\n            if (n) {\n                that.FizzyText['drawBar'] = false;\n                that.FizzyText['drawWave'] = false;\n            }\n            that.FizzyText[prop] = n;\n        }\n        f1.add(that.FizzyText, 'drawWave').listen().onChange(function() {\n            setChecked('drawWave')\n        });\n        f1.addColor(that.FizzyText, 'waveColor');\n\n        var f2 = gui.addFolder('Frequency Bar')\n        f2.add(that.FizzyText, 'drawBar').listen().onChange(function() {\n            setChecked('drawBar')\n        });;\n        f2.addColor(that.FizzyText, 'barColor');\n\n        gui.add(that.FizzyText, 'play');\n        gui.add(that.FizzyText, 'pause');\n\n    },\n    initAudioCanvas: function() {\n        var that = this;\n        try {\n            var audioCtx = new(window.AudioContext || window.webkitAudioContext)();\n        } catch (e) {\n            alert('Your browser does not support AudioContext!');\n            console.log(e);\n        }\n\n        var audio = document.getElementById('audio');\n\n        var source = audioCtx.createMediaElementSource(audio);\n        var analyser = audioCtx.createAnalyser();\n        analyser.connect(audioCtx.destination);\n        source.connect(analyser);\n\n        //确定频域的FFT的大小\n        analyser.fftSize = 2048;\n        //fftSize一半，用于可视化的数据量的数量\n        var bufferLength = analyser.frequencyBinCount;\n        //创建无符号字节数组\n        var dataArray = new Uint8Array(bufferLength);\n\n        //当前频域数据\n        // analyser.getByteFrequencyData(dataArray)\n\n        //将当前波形，或者时域数据拷贝\n        // analyser.getByteTimeDomainData(dataArray);\n\n        //Create a Pixi Application\n        var app = new PIXI.Application({ width: 800, height: 600 });\n        //Add the canvas that Pixi automatically created for you to the HTML document\n        document.getElementById('canvas-wrapper').appendChild(app.view);\n        var w = 800;\n        var h = 600;\n        var graphics = new PIXI.Graphics();\n\n        graphics.clear();\n\n        app.stage.addChild(graphics);\n\n        function drawBar() {\n\n            //get frequency data and put it into the array created above\n            analyser.getByteFrequencyData(dataArray);\n            graphics.clear();\n            graphics.beginFill(that.FizzyText.barColor);\n\n\n            var barWidth = (w / bufferLength) * 10;\n            var barHeight;\n            var x = 0;\n\n            for (var i = 0; i < bufferLength; i++) {\n                barHeight = dataArray[i];\n\n                // graphics.beginFill ( 'rgb(' + (barHeight + 100) + ',50,50)')\n\n                graphics.drawRect(x, h/2 - barHeight / 2, barWidth, barHeight / 2);\n\n                x += barWidth + 1;\n            }\n\n        }\n\n        function drawWave() {\n            //get waveform data and put it into the array created above\n            analyser.getByteTimeDomainData(dataArray);\n            graphics.clear();\n            var sliceWidth = w * 1.0 / bufferLength;\n            var x = 0;\n            graphics.beginFill();\n            graphics.lineStyle(2, that.FizzyText.waveColor, 1);\n            // console.log(dataArray)\n            for (var i = 0; i < bufferLength; i++) {\n                var v = dataArray[i] / 128.0;\n                var y = v * h / 2;\n\n                if (i === 0) {\n                    // graphics.clear();\n                    graphics.moveTo(x, y);\n                } else {\n                    graphics.lineTo(x, y);\n                }\n                x += sliceWidth;\n            }\n            graphics.lineTo(w, h / 2);\n            graphics.endFill();\n        }\n\n        var ticker = new PIXI.ticker.Ticker();\n        ticker.stop();\n        ticker.add((deltaTime) => {\n\n            if (that.FizzyText.drawWave) {\n                drawWave();\n                return;\n            }\n            if (that.FizzyText.drawBar) {\n                drawBar();\n                return;\n            }\n        });\n        // audio.play();\n        audio.addEventListener('play', function() {\n            console.log('play');\n            ticker.start();\n        })\n        audio.addEventListener('pause', function() {\n            console.log('pause');\n            // ticker.stop();\n        })\n\n    },\n    isPc: function() {\n        var userAgentInfo = navigator.userAgent;\n        var Agents = new Array('Android', 'iPhone', 'SymbianOS', 'Windows Phone', 'iPad', 'iPod');\n        var flag = true;\n        for (var v = 0; v < Agents.length; v++) {\n            if (userAgentInfo.indexOf(Agents[v]) > 0) { flag = false; break; }\n        }\n        return flag;\n    },\n    rootResize: function() {\n        var wFsize;\n\n        //iphone6/6s/7/8 orientation=portrait screen.width=750px screen.height=1334px / WeChat window.innerWidth=750px window.innerHeight=1206px \n        var wWidth = (window.screen.width > 0) ? (window.innerWidth >= window.screen.width || window.innerWidth == 0) ? screen.width :\n            window.innerWidth : window.innerWidth;\n        var wHeight = (window.screen.height > 0) ? (window.innerHeight >= window.screen.height || window.innerHeight == 0) ?\n            window.screen.height : window.innerHeight : window.innerHeight;\n        // var wWidth = window.innerWidth;\n        // var wHeight = window.innerHeight;\n\n        if (wWidth > wHeight) {\n            wFsize = wHeight / 750 * 100;\n        } else {\n            wFsize = wWidth / 750 * 100;\n        }\n        document.getElementsByTagName('html')[0].style.fontSize = wFsize + 'px';\n    },\n    eventInit: function() {\n        var that = this;\n        document.addEventListener('touchstart', function(e) {}, { passive: false });\n        document.addEventListener('touchmove', function(e) {\n            e.preventDefault();\n        }, { passive: false });\n        return that;\n    },\n    cssInit: function() {\n        var that = this;\n        var noChangeCountToEnd = 100,\n            noEndTimeout = 1000;\n        that.rootResize();\n        window.addEventListener('onorientationchange' in window ? 'orientationchange' : 'resize', function() {\n            var interval,\n                timeout,\n                end,\n                lastInnerWidth,\n                lastInnerHeight,\n                noChangeCount;\n            end = function() {\n                // \"orientationchangeend\"\n                clearInterval(interval);\n                clearTimeout(timeout);\n                interval = null;\n                timeout = null;\n                that.rootResize();\n            };\n            interval = setInterval(function() {\n                if (window.innerWidth === lastInnerWidth && window.innerHeight === lastInnerHeight) {\n                    noChangeCount++;\n                    if (noChangeCount === noChangeCountToEnd) {\n                        // The interval resolved the issue first.\n                        end();\n                    }\n                } else {\n                    lastInnerWidth = window.innerWidth;\n                    lastInnerHeight = window.innerHeight;\n                    noChangeCount = 0;\n                }\n            });\n            timeout = setTimeout(function() {\n                // The timeout happened first.\n                end();\n            }, noEndTimeout);\n        });\n\n        return that;\n    },\n    init: function() {\n        var that = this;\n        that.cssInit().eventInit();\n        that.initGUI()\n        that.initAudioCanvas();\n    }\n};\nwindow.onload = function() {\n    window.h5.init();\n};\n\n//Stats JavaScript Performance Monitor\n\n//import Stats from 'stats.js';\n//showStats();\n// function showStats() {\n//     var stats = new Stats();\n//     stats.showPanel(0); // 0: fps, 1: ms, 2: mb, 3+: custom\n//     var fs = document.createElement('div');\n//     fs.style.position = 'absolute';\n//     fs.style.left = 0;\n//     fs.style.top = 0;\n//     fs.style.zIndex = 999;\n//     fs.appendChild(stats.domElement);\n//     document.body.appendChild(fs);\n\n//     function animate() {\n//         stats.begin();\n//         // monitored code goes here\n//         stats.end();\n//         requestAnimationFrame(animate);\n//     }\n//     requestAnimationFrame(animate);\n// }"],"sourceRoot":""}